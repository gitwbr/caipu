<!--pages/record/quick-record.wxml-->
<view class="container">
  <!-- 顶部时间显示（带进来的时间） -->
  <view class="date-display" wx:if="{{recordDate}}">
    <text class="date-text">{{recordDate}}</text>
  </view>

  <view class="form">
    <!-- 食物名称 -->
    <view class="form-item">
      <view class="label">食物名称</view>
      <input 
        class="input" 
        placeholder="快速记录" 
        value="{{food_name}}"
        data-field="food_name"
        bindinput="onInputChange"
      />
    </view>

    <!-- 热量 -->
    <view class="form-item">
      <view class="label">热量 (千卡) *</view>
      <input 
        class="input" 
        type="digit"
        placeholder="请输入热量" 
        value="{{energy_kcal}}"
        data-field="energy_kcal"
        bindinput="onInputChange"
      />
    </view>



    <!-- 蛋白质 -->
    <view class="form-item">
      <view class="label">蛋白质 (g)</view>
      <input 
        class="input" 
        type="digit"
        placeholder="请输入蛋白质含量" 
        value="{{protein_g}}"
        data-field="protein_g"
        bindinput="onInputChange"
      />
    </view>

    <!-- 脂肪 -->
    <view class="form-item">
      <view class="label">脂肪 (g)</view>
      <input 
        class="input" 
        type="digit"
        placeholder="请输入脂肪含量" 
        value="{{fat_g}}"
        data-field="fat_g"
        bindinput="onInputChange"
      />
    </view>

    <!-- 碳水化合物 -->
    <view class="form-item">
      <view class="label">碳水化合物 (g)</view>
      <input 
        class="input" 
        type="digit"
        placeholder="请输入碳水化合物含量" 
        value="{{carbohydrate_g}}"
        data-field="carbohydrate_g"
        bindinput="onInputChange"
      />
    </view>

    <!-- 图片上传（与自定义食物一致的样式：左文字右相机/缩略图） -->
    <view class="form-item image-inline">
      <text class="label">食物图片</text>
      <view class="image-inline-slot">
        <view wx:if="{{!(imagePath || imageUrl)}}" class="camera-btn-mini" bindtap="onCameraClick">📷</view>
        <view wx:else class="thumb-wrap">
          <image class="thumb" src="{{imagePath || imageUrl}}" mode="aspectFill" lazy-load />
          <view class="remove-thumb" bindtap="removeImage">−</view>
        </view>
      </view>
    </view>

    <!-- 备注 -->
    <view class="form-item">
      <view class="label">备注</view>
      <textarea 
        class="textarea" 
        placeholder="请输入备注信息" 
        value="{{notes}}"
        data-field="notes"
        bindinput="onInputChange"
      />
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="actions">
    <button 
      class="btn btn-clear" 
      bindtap="onClear"
      disabled="{{submitting}}"
    >
      清空
    </button>
    <button 
      class="btn btn-submit" 
      bindtap="onSubmit"
      disabled="{{submitting}}"
    >
      {{submitting ? '保存中...' : '保存'}}
    </button>
  </view>
</view>
